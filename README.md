# ChatGPT-Feishu
ç»™é£ä¹¦ç”¨æˆ·å‡†å¤‡çš„ ChatGPT æœºå™¨äººã€‚

âœ… èƒ½ä»¥å•èŠæˆ–ç¾¤èŠå½¢å¼å›å¤ä¿¡æ¯

âœ… æ”¯æŒä¸­æ—¥éŸ©è‹±è¯­

ğŸ¤¡ ç›®å‰æ¯å¥è¯éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¼šè¯ï¼Œæš‚ä¸æ”¯æŒä¼šè¯ä¸Šä¸‹æ–‡ï¼Œ

è§†é¢‘æ¼”ç¤ºå¦‚ä¸‹ï¼Œç”Ÿæˆç•¥æ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…~

## æ•ˆæœ


https://user-images.githubusercontent.com/13283837/217905601-6e1ff237-5275-4deb-8135-3071b1e977a8.mp4


## å¦‚ä½•ä½¿ç”¨æœ¬é¡¹ç›®ä»£ç ï¼Ÿ

> è§†é¢‘æ•™ç¨‹è§ -> https://youtu.be/axvH1D0Dhnk | https://www.bilibili.com/video/BV1uT411R7TL/

### 1. åˆ›å»ºä¸€ä¸ªé£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨ï¼Œå¹¶è·å–åˆ° APPID å’Œ Secret

è®¿é—® [å¼€å‘è€…åå°](https://open.feishu.cn/app?lang=zh-CN)ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º **ChatGPT** çš„åº”ç”¨ï¼Œå¹¶ä¸Šä¼ åº”ç”¨å¤´åƒã€‚åˆ›å»ºå®Œæˆåï¼Œè®¿é—®ã€å‡­è¯ä¸åŸºç¡€ä¿¡æ¯ã€‘é¡µé¢ï¼Œå¤åˆ¶ APPID å’Œ Secret å¤‡ç”¨ã€‚

![image-20230210012031179](https://postimg.aliavv.com/picgo/202302100120339.png)

### 2. å¼€å¯æœºå™¨äººèƒ½åŠ›

æ‰“å¼€åº”ç”¨çš„æœºå™¨äººåº”ç”¨åŠŸèƒ½

![image-20230210012110735](https://postimg.aliavv.com/picgo/202302100121008.png)

### 3. è®¿é—® [AirCode](https://aircode.io/dashboard) ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®

ç™»å½• [AirCode](https://aircode.io/dashboard) ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Node.js v16 çš„é¡¹ç›®ï¼Œé¡¹ç›®åå¯ä»¥æ ¹æ®ä½ çš„éœ€è¦å¡«å†™ï¼Œå¯ä»¥å¡«å†™ ChatGPT

![image-20230210012334145](https://postimg.aliavv.com/picgo/202302100123254.png)

### 4. å¤åˆ¶æœ¬é¡¹ç›®ä¸‹çš„ event.js çš„æºç å†…å®¹ï¼Œå¹¶ç²˜è´´åˆ° Aircode å½“ä¸­

è®¿é—®[ChatGPT-Feishu/event.js at master Â· bestony/ChatGPT-Feishu (github.com)](https://github.com/bestony/ChatGPT-Feishu/blob/master/event.js)ï¼Œå¤åˆ¶ä»£ç 

![image-20230210012555571](https://postimg.aliavv.com/picgo/202302100125750.png)

å¹¶æŠŠä»£ç ç²˜è´´åˆ° AIrcode é»˜è®¤åˆ›å»ºçš„ hello.js ã€‚ç„¶åç‚¹å‡»é¡¶éƒ¨çš„ deploy ï¼Œå®Œæˆç¬¬ä¸€æ¬¡éƒ¨ç½²ã€‚

![image-20230210012653296](https://postimg.aliavv.com/picgo/202302100126536.png)

éƒ¨ç½²æˆåŠŸåï¼Œå¯ä»¥åœ¨ä¸‹æ–¹çœ‹åˆ°ã€‚

![image-20230210012808063](https://postimg.aliavv.com/picgo/202302100128288.png)



### 5. å®‰è£…æ‰€éœ€ä¾èµ–

è¿™ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é£ä¹¦å¼€æ”¾å¹³å°å®˜æ–¹æä¾›çš„ SDKï¼Œä»¥åŠ axios æ¥å®Œæˆè°ƒç”¨ã€‚ç‚¹å‡»é¡µé¢å·¦ä¸‹è§’çš„åŒ…ç®¡ç†å™¨ï¼Œå®‰è£… `axios` å’Œ `@larksuiteoapi/node-sdk`ã€‚å®‰è£…å®Œæˆåï¼Œç‚¹å‡»ä¸Šæ–¹çš„éƒ¨ç½²ï¼Œä½¿å…¶ç”Ÿæ•ˆã€‚

![image-20230210025955556](https://postimg.aliavv.com/picgo/202302100259761.png)

### 6. é…ç½®ç¯å¢ƒå˜é‡

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é…ç½®ç¯å¢ƒå˜é‡ï¼Œä½ éœ€è¦é…ç½®ä¸‰ä¸ªç¯å¢ƒå˜é‡ `APPID` ã€`SECRET` å’Œ `BOTNAME`ï¼ŒAPPID å¡«å†™ä½ åˆšåˆšåœ¨é£ä¹¦å¼€æ”¾å¹³å°è·å–çš„ APPIDï¼ŒSECRET å¡«å†™ä½ åœ¨é£ä¹¦å¼€æ”¾å¹³å°è·å–åˆ°çš„ SECRETï¼ŒBOTNAME å¡«å†™ä½ çš„æœºå™¨äººçš„åå­—ã€‚

> é…ç½®ç¯å¢ƒå˜é‡å¯èƒ½ä¼šå¤±è´¥ï¼Œå¯ä»¥å¤š deploy å‡ æ¬¡ï¼Œç¡®ä¿é…ç½®æˆåŠŸã€‚

![image-20230210013355689](https://postimg.aliavv.com/picgo/202302100133798.png)

é…ç½®å®Œæˆåï¼Œç‚¹å‡»ä¸Šæ–¹çš„ **Deploy** æŒ‰é’®éƒ¨ç½²ï¼Œä½¿è¿™äº›ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚

![image-20230210013518142](https://postimg.aliavv.com/picgo/202302100135209.png)

ä¼šå˜æˆè¿™æ ·çš„

![image-20230210013603084](https://postimg.aliavv.com/picgo/202302100136124.png)

### 7. è·å– OpenAI çš„ KEY ï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡

è®¿é—® [Account API Keys - OpenAI API](https://platform.openai.com/account/api-keys) ï¼Œç‚¹å‡»è¿™é‡Œçš„ Create new secret key ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ key ï¼Œå¹¶ä¿å­˜å¤‡ç”¨ã€‚

![image-20230210013702015](https://postimg.aliavv.com/picgo/202302100137078.png)

é‡æ–°å›åˆ° Aircodeï¼Œ é…ç½®ä¸€ä¸ªåä¸º `KEY` çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶å¡«å†™ä½ åˆšåˆšç”Ÿæˆçš„ Key ã€‚é…ç½®å®Œæˆåï¼Œç‚¹å‡»éƒ¨ç½²ä½¿å…¶ç”Ÿæ•ˆã€‚

![image-20230210022322720](https://postimg.aliavv.com/picgo/202302100223839.png)

### 8. å¼€å¯æƒé™å¹¶é…ç½®äº‹ä»¶

è®¿é—®å¼€æ”¾å¹³å°é¡µé¢ï¼Œå¼€é€šå¦‚ä¸‹ 6 ä¸ªæƒé™ï¼š

- im:message
- im:message.group_at_msg
- im:message.group_at_msg:readonly
- im:message.p2p_msg
- im:message.p2p_msg:readonly
- im:message:send_as_bot

![image-20230210022432066](https://postimg.aliavv.com/picgo/202302100224325.png)

ç„¶åå›åˆ° AirCode ï¼Œå¤åˆ¶å‡½æ•°çš„è°ƒç”¨åœ°å€ã€‚

![image-20230210022628784](https://postimg.aliavv.com/picgo/202302100226846.png)

ç„¶åå›åˆ°äº‹ä»¶è®¢é˜…ç•Œé¢ï¼Œæ·»åŠ äº‹ä»¶ã€‚

![image-20230210022720552](https://postimg.aliavv.com/picgo/202302100227786.png)

### 9. å‘å¸ƒç‰ˆæœ¬ï¼Œç­‰å¾…å®¡æ ¸

ä¸Šè¿°è¿™äº›éƒ½é…ç½®å®Œæˆåï¼Œä½ çš„æœºå™¨äººå°±é…ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨é£ä¹¦å¼€æ”¾å¹³å°åå°æ‰¾åˆ°åº”ç”¨å‘å¸ƒï¼Œåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç‰ˆæœ¬å¹¶å‘å¸ƒç‰ˆæœ¬å³å¯ã€‚

## å¦‚ä½•è´¡çŒ®ï¼Ÿ

æ¬¢è¿é€šè¿‡ issue æäº¤ä½ çš„æƒ³æ³•ï¼Œå¸®åŠ©æˆ‘è¿­ä»£è¿™ä¸ªé¡¹ç›® or ç›´æ¥é€šè¿‡ Pull Request æ¥æäº¤ä½ çš„ä»£ç ã€‚å‘å¸ƒæˆåŠŸåï¼Œä½ å°±å¯ä»¥åœ¨é£ä¹¦å½“ä¸­ä½“éªŒ ChatGPT äº†ã€‚

![image-20230210022834052](https://postimg.aliavv.com/picgo/202302100228159.png)


## æœ‰é—®é¢˜æ²Ÿé€šå¯åŠ ç¾¤

![image](https://user-images.githubusercontent.com/13283837/218001986-2b79cc73-52c9-43db-b07e-bf78cc0cedab.png)


## FAQ

### 1. æäº¤äº‹ä»¶è®¢é˜…åœ°å€æ—¶æç¤º Challenge Code æ²¡æœ‰è¿”å›ï¼Ÿ
å¯ä»¥çœ‹çœ‹æ˜¯ä¸æ˜¯é…ç½®äº†  Encrypt Key ï¼Œæš‚æ—¶ä¸æ”¯æŒå¯¹åŠ å¯†æ•°æ®è§£å¯†ã€‚è·¯å¾„æ˜¯åº”ç”¨åå° - äº‹ä»¶è®¢é˜…

![image](https://user-images.githubusercontent.com/13283837/218002249-362a40ab-3f5d-493b-80ec-a2b0efa2b5c9.png)

### 2. å¯ä»¥ç§èŠå›å¤ï¼Œä½†æ²¡åŠæ³•ç¾¤èŠå›å¤ï¼Ÿ

ç¡®ä¿ 6 é¡¹å¼€æ”¾å¹³å°æƒé™éƒ½å·²ç»å¼€é€šä¸”å·²ç»å‘å¸ƒç‰ˆæœ¬ï¼Œæƒé™è¿›å…¥å¯ç”¨çŠ¶æ€ã€‚

å¦ä¸€æƒ…å†µæ˜¯é£ä¹¦æœºå™¨äººåç§°ä¸ BOTNAME å˜é‡ä¸ä¸€è‡´ã€‚ç”±äº aircode çš„ç¯å¢ƒå˜é‡**ä¸æ”¯æŒä¸­æ–‡**ï¼Œå¦‚æœæœºå™¨äººåç§°ä¸ºä¸­æ–‡ä¹Ÿä¼šé€ æˆéƒ¨ç½²å¤±è´¥ã€‚

è§£å†³åŠæ³•ï¼šä¿®æ”¹é£ä¹¦æœºå™¨äººçš„åç§°ä¸ºè‹±æ–‡ï¼Œæˆ–ç›´æ¥ä¿®æ”¹ä»£ç ä¸­çš„ BOTNAME å€¼ã€‚

### 3. aircode æç¤ºæŠ¥é”™ failed to obtain token?

è¯´æ˜ä½ çš„ aircode çš„ç¯å¢ƒå˜é‡é…ç½®æ²¡æˆåŠŸï¼Œå¯ä»¥é‡æ–°é…ç½®ä¸€ä¸‹ï¼Œç„¶åå†éƒ¨ç½²ä¸€ä¸‹ã€‚

### 4. cannot set propoertis of undefined (setting 'event_type')?

è¯´æ˜ä½ ç”¨ HTTP å‘èµ·è¯·æ±‚ / æˆ–è€…ç”¨äº† aircode çš„debug åŠŸèƒ½ï¼Œæ˜¯æ­£å¸¸ç°è±¡ã€‚

## LICENSE

[GPLv3](LICENSE)
